---
// Fundations
import Text from "@/components/fundations/elements/Text.astro";
import Wrapper from "@/components/fundations/containers/Wrapper.astro";
import PortableText from "@/components/fundations/elements/PortableText.astro";
import SanityImage from "@/components/fundations/elements/SanityImage.astro";
import CustomerEntry1 from "@/components/customers/CustomerEntry1.astro";

interface Props {
  feature?: {
    header?: string;
    subheading?: any[];
    image?: {
      asset?: { _ref?: string };
      assetAltText?: string;
      alt?: string;
    };
    customerTestimonial?: {
      _ref: string;
      title: string;
      slug: string;
      image: {
        assetUrl?: string;
        alt?: string;
      };
    };
  };
}

const { feature } = Astro.props;
const { header, subheading, image, customerTestimonial } = feature || {};

// Don't render if no feature data
if (!feature) {
  return null;
}
---

<section class="feature-3">
  <Wrapper variant="standard" class="pt-12 pb-4 border-t">
    {header && (
      <div class="text-balance">
        <Text
          tag="h2"
          variant="displaySM"
          class="font-serif font-medium tracking-tight text-black feature-header"
        >
          {header}
        </Text>
        {subheading && (
          <div class="max-w-xl mt-4 text-base-500 feature-subheading">
            <PortableText value={subheading} />
          </div>
        )}
      </div>
    )}
    <div class="mt-8 grid grid-cols-1 lg:grid-cols-3 gap-4 feature-content">
      {image?.asset?._ref && (
        <div class="lg:col-span-2 feature-image-container">
          <SanityImage
            image={image}
            class="w-full h-auto rounded-xl shadow-sm"
          />
        </div>
      )}
      {customerTestimonial && (
        <div class="feature-customer-testimonial">
          <CustomerEntry1 post={customerTestimonial} />
        </div>
      )}
    </div>
  </Wrapper>
</section>
