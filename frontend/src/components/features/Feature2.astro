---
// Fundations
import Text from "@/components/fundations/elements/Text.astro";
import Wrapper from "@/components/fundations/containers/Wrapper.astro";
import PortableText from "@/components/fundations/elements/PortableText.astro";
import IconRenderer from "@/components/fundations/elements/IconRenderer.astro";

interface Props {
  feature?: {
    header?: string;
    subheading?: any[];
    features?: Array<{
      id: string;
      title: string;
      description: string;
      icon: {
        assetUrl?: string;
        alt?: string;
      };
    }>;
  };
}

const { feature } = Astro.props;
const { header, subheading, features = [] } = feature || {};

// Don't render if no feature data
if (!feature || !features || features.length === 0) {
  return null;
}
---

<section class="feature-2">
  <Wrapper variant="standard" class="pt-12 pb-4 border-t">
    {header && (
      <div class="max-w-xl text-balance">
        <Text
          tag="h2"
          variant="displaySM"
          class="font-serif font-medium tracking-tight text-black feature-header"
        >
          {header}
        </Text>
        {subheading && (
          <div class="mt-4 text-base-500 feature-subheading">
            <PortableText value={subheading} />
          </div>
        )}
      </div>
    )}
    <div
      class="items-center mt-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-2 feature-grid"
    >
      {
        features.map((feature) => (
          <div class="flex flex-col h-full p-4 bg-sand-100 rounded-xl group hover:bg-white hover:shadow-2xl duration-300 outline-transparent hover:outline hover:outline-sand-100 feature-item">
            <div class="inline-flex p-4 bg-white rounded-lg group-hover:bg-sand-100 duration-300 group-hover:-rotate-12 group-hover:-translate-y-2 w-fit feature-icon">
              <IconRenderer icon={feature.icon} size="base" class="text-accent-500" />
            </div>
            <Text
              tag="h3"
              variant="textSM"
              class="mt-12 font-medium text-base-900 feature-title"
            >
              {feature.title}
            </Text>
            <Text tag="p" variant="textSM" class="mt-2 text-base-500 feature-description">
              {feature.description}
            </Text>
          </div>
        ))
      }
    </div>
  </Wrapper>
</section>
