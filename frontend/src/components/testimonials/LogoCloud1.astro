---
// foundations
import Wrapper from "@/components/foundations/containers/Wrapper.astro";
import SanityImage from "@/components/foundations/elements/SanityImage.astro";

interface Props {
  feature?: {
    images?: Array<{
      image: { asset?: { _ref?: string; _id?: string; altText?: string }; assetAltText?: string; alt?: string };
      iconTitle?: string;
      class?: string;
      loading?: "lazy" | "eager";
    }>;
  };
}

const { feature } = Astro.props as Props;
const images = feature?.images ?? [];

if (!feature || images.length === 0) {
  return null;
}
---

<section class="logo-cloud-1">
  <Wrapper variant="standard" class="relative overflow-hidden border-t">
    <div
      class="marquee relative flex items-center py-8 gap-12 lg:gap-24 whitespace-nowrap">
      <div class="marquee-track flex items-start">
        {
          images.map((img) => (
            <div class="icon-wrapper">
              <SanityImage
                image={img.image}
                class={(img.class || "") + " w-full h-full max-h-[100px] object-contain"}
                loading={img.loading}
              />
              {img.iconTitle && (
                <div class="icon-title">{img.iconTitle}</div>
              )}
            </div>
          ))
        }
      </div>
      <div class="marquee-track flex items-start" aria-hidden="true">
        {
          images.map((img) => (
            <div class="icon-wrapper">
              <SanityImage
                image={img.image}
                class={(img.class || "") + " w-full h-full max-h-[100px] object-contain"}
                loading={img.loading}
              />
              {img.iconTitle && (
                <div class="icon-title">{img.iconTitle}</div>
              )}
            </div>
          ))
        }
      </div>
    </div>
    <div
      class="carousel-gradient"
    >
    </div>
  </Wrapper>
</section>

<style>
  .marquee-track {
    height: 100%;

  }  
  .icon-wrapper {
    width: 75px;
    height: auto;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: space-between;
    gap: 1rem;
  }
  .icon-title {
    text-align: center;
    color: var(--body-text-color);
    font-family: var(--font-mono);
  }
  .carousel-gradient {
    position: absolute;
    inset: 0;
    width: 100%;
    pointer-events: none;
   --gradient-color: light-dark(var(--color-sand-50), var(--color-base-800));

    background-image: linear-gradient(90deg, var(--gradient-color) 50px, transparent, var(--gradient-color) calc(100% - 50px));
  }
</style>