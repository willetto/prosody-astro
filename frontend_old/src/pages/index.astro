---
import { getCollection } from "astro:content";
import Preloader from "../components/Preloader.astro";
import ProductGrid from "../components/ProductGrid.astro";
import ProductGridHeader from "../components/ProductGridHeader.astro";
import BaseLayout from "../layouts/BaseLayout.astro";

const allProducts = await getCollection("products");
const productsTotal = allProducts.length;
const title = "Astro Sanity Club - All Pieces";
---

<BaseLayout title={title}>
  <!--
    The <Preloader /> component is used to preload all images on the homepage using the images.loaded.js script.
    If you don’t want to use the preloader (e.g., for faster page load times or if you don’t require preloading images), you can safely remove the <Preloader /> component from this layout.
  -->
  <Preloader />
  <ProductGridHeader productsTotal={productsTotal} />
  <ProductGrid products={allProducts} />
</BaseLayout>
<script src="../scripts/index.js"></script>
